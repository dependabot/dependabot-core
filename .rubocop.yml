---
inherit_from: .rubocop_todo.yml

plugins:
  - rubocop-performance
  - rubocop-rspec
  - rubocop-sorbet

AllCops:
  DisplayCopNames: true
  Exclude:
    - "*/vendor/**/*"
    - "**/tmp/**/*"
    - "*/spec/fixtures/**/*"
    - "vendor/**/*"
    - "dry-run/**/*"
    - "bundler/helpers/spec_helpers/*"
  NewCops: enable
  TargetRubyVersion: 3.3
  SuggestExtensions:
    rubocop-rake: false

Gemspec/DevelopmentDependencies:
  Enabled: false
Gemspec/RequireMFA:
  Enabled: false

Layout/FirstArrayElementIndentation:
  EnforcedStyle: consistent
Layout/FirstHashElementIndentation:
  EnforcedStyle: consistent
Layout/FirstMethodArgumentLineBreak:
  Enabled: true
Layout/MultilineMethodArgumentLineBreaks:
  Enabled: true
Layout/FirstMethodParameterLineBreak:
  Enabled: true
Layout/MultilineMethodParameterLineBreaks:
  Enabled: true
Layout/LineContinuationLeadingSpace:
  Enabled: false

Lint/DuplicateBranch:
  Enabled: false
Lint/MissingSuper:
  Enabled: false
Lint/MixedRegexpCaptureTypes:
  Enabled: false
Lint/NoReturnInBeginEndBlocks:
  Enabled: false
Lint/RaiseException:
  Enabled: false
Lint/StructNewOverride:
  Enabled: false

Metrics/AbcSize:
  Max: 35
Metrics/BlockLength:
  Exclude:
    - "*/Rakefile"
    - "**/spec/**/*"
    - "*/dependabot-*.gemspec"
  Max: 35
Metrics/ClassLength:
  Max: 350
Metrics/CyclomaticComplexity:
  Max: 15
Metrics/MethodLength:
  Max: 35
Metrics/ModuleLength:
  Max: 350
Metrics/ParameterLists:
  CountKeywordArgs: false
Metrics/PerceivedComplexity:
  Max: 10

Naming/FileName:
  Enabled: false

Performance/BlockGivenWithExplicitBlock:
  Enabled: true
Performance/CaseWhenSplat:
  Enabled: true
Performance/Casecmp:
  Enabled: true
Performance/IoReadlines:
  Enabled: true

RSpec:
  Include:
    - "**/spec/**/*"
RSpec/IndexedLet:
  Enabled: false

Sorbet/ForbidTUnsafe:
  Enabled: true
Sorbet/TrueSigil:
  Enabled: true
  Exclude:
    - "**/spec/**/*"
    - "rakelib/support/test/**/*"
Sorbet/StrictSigil:
  Enabled: true
  Exclude:
    - "**/spec/**/*"
    - "bin/**/*"
    - "rakelib/support/test/**/*"
Sorbet/StrongSigil:
  Exclude:
    - "**/spec/**/*"
    - "rakelib/support/test/**/*"

Style/AccessorGrouping:
  EnforcedStyle: "separated"
Style/ArgumentsForwarding:
  Enabled: false
Style/BisectedAttrAccessor:
  Enabled: false
Style/CaseLikeIf:
  Enabled: false
Style/Documentation:
  Enabled: false
Style/HashEachMethods:
  Enabled: false
Style/HashTransformKeys:
  Enabled: false
Style/MultipleComparison:
  Enabled: false
Style/NumericPredicate:
  Exclude:
    - "*/spec/**/*"
Style/OptionalBooleanParameter:
  Enabled: false
Style/PercentLiteralDelimiters:
  PreferredDelimiters:
    "%I": "()"
    "%W": "()"
    "%i": "()"
    "%w": "()"
Style/RedundantAssignment:
  Enabled: false
Style/RedundantConstantBase:
  Enabled: false
Style/RedundantRegexpCharacterClass:
  Enabled: false
Style/RedundantRegexpEscape:
  Enabled: false
Style/SlicingWithRange:
  Enabled: false
Style/StringConcatenation:
  Enabled: false
Style/StringLiterals:
  EnforcedStyle: double_quotes
Style/OpenStructUse:
  Enabled: false
Style/SpecialGlobalVars:
  Enabled: false
Style/SelectByRegexp:
  Enabled: false

# TODO these were temporarily disabled during the Ruby 2.7 -> 3.1 upgrade
# in order to keep the upgrade diff small, they will be enabled/fixed in
# a follow-on PR.
Naming/BlockForwarding:
  Enabled: false
