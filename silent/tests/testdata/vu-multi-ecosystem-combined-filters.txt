dependabot update -f input.yml --local . --updater-image ghcr.io/dependabot/dependabot-updater-silent
stdout create_pull_request
pr-created expected-prod-all.json

-- manifest.json --
{
  "dependency-a": { "version": "1.2.3", "group": "dev" },
  "dependency-b": { "version": "2.0.0", "group": "dev" },
  "dependency-c": { "version": "3.5.0" },
  "dependency-d": { "version": "4.1.0" },
  "exclude-me": { "version": "5.0.0" }
}

-- expected-prod-all.json --
{
  "dependency-a": { "version": "1.2.3", "group": "dev" },
  "dependency-b": { "version": "2.0.0", "group": "dev" },
  "dependency-c": { "version": "4.0.0" },
  "dependency-d": { "version": "5.0.0" },
  "exclude-me": { "version": "5.0.0" }
}

-- dependency-a --
{
  "versions": [
    "1.2.3",
    "1.2.4",
    "1.3.0",
    "2.0.0"
  ]
}

-- dependency-b --
{
  "versions": [
    "2.0.0",
    "2.1.0",
    "3.0.0"
  ]
}

-- dependency-c --
{
  "versions": [
    "3.5.0",
    "3.6.0",
    "4.0.0"
  ]
}

-- dependency-d --
{
  "versions": [
    "4.1.0",
    "4.2.0",
    "5.0.0"
  ]
}

-- exclude-me --
{
  "versions": [
    "5.0.0",
    "5.1.0"
  ]
}

-- input.yml --
job:
  package-manager: "silent"
  source:
    directory: "/"
    provider: example
    hostname: 127.0.0.1
    api-endpoint: http://127.0.0.1/api/v3
    repo: dependabot/smoke-tests
  multi-ecosystem-update: true
  dependency-groups:
    - name: dev-minor-patch
      rules:
        dependency-type: "development"
        update-types:
          - minor
          - patch
        exclude-patterns:
          - "exclude-me"
    - name: prod-all
      rules:
        dependency-type: "production"
        exclude-patterns:
          - "exclude-me"
